class Pushbar{constructor(e={overlay:!0,blur:!1}){if(this.activeBar=null,this.overlay=!1,e.overlay&&(this.overlay=document.createElement("div"),this.overlay.classList.add("pushbar_overlay"),document.querySelector("body").appendChild(this.overlay)),e.blur){const e=document.querySelector(".pushbar_main_content");e&&e.classList.add("pushbar_blur")}this.bindEvents()}get opened(){const{activeBar:e}=this;return Boolean(e instanceof HTMLElement&&e.classList.contains("opened"))}get activeBarId(){const{activeBar:e}=this;return e instanceof HTMLElement&&e.getAttribute("data-pushbar-id")}static dispatchOpen(e){const t=new CustomEvent("pushbar_opening",{bubbles:!0,detail:{pushbar:e}});e.dispatchEvent(t)}static dispatchClose(e){const t=new CustomEvent("pushbar_closing",{bubbles:!0,detail:{pushbar:e}});e.dispatchEvent(t)}static findElementById(e){return document.querySelector(`[data-pushbar-id="${e}"]`)}handleOpenEvent(e){e.preventDefault();const t=e.currentTarget.getAttribute("data-pushbar-target");t&&this.open(t)}handleCloseEvent(e){e.preventDefault(),this.close()}handleKeyEvent(e){this.opened&&27===e.keyCode&&this.close()}bindEvents(){const e=document.querySelectorAll("[data-pushbar-target]"),t=document.querySelectorAll("[data-pushbar-close]");e.forEach(e=>e.addEventListener("click",e=>this.handleOpenEvent(e),!1)),t.forEach(e=>e.addEventListener("click",e=>this.handleCloseEvent(e),!1)),this.overlay&&this.overlay.addEventListener("click",e=>this.handleCloseEvent(e),!1),document.addEventListener("keyup",e=>this.handleKeyEvent(e))}open(e){if(String(e)===this.activeBarId&&this.opened)return;const t=Pushbar.findElementById(e);if(!t)return;this.opened&&this.close(),Pushbar.dispatchOpen(t),t.classList.add("opened");const s=document.querySelector("html");s.classList.add("pushbar_locked"),s.setAttribute("pushbar",e),this.activeBar=t}close(){const{activeBar:e}=this;if(!e)return;Pushbar.dispatchClose(e),e.classList.remove("opened");const t=document.querySelector("html");t.classList.remove("pushbar_locked"),t.removeAttribute("pushbar"),this.activeBar=null}}